<!doctype html> <html lang=en> <head> <meta charset=utf-8> <meta content="Can I rely on the Web Platform features to build my app? An overview of the device integration HTML5 APIs" name=description> <meta content="width=device-width,initial-scale=1" name=viewport> <base href=/ > <link href=https://fonts.gstatic.com/s/sourcesanspro/v13/6xK3dSBYKcSV-LCoeQqfX1RYOo3qOK7lujVj9w.woff2 rel=preload type=font/woff2 as=font crossorigin=anonymous> <link href=https://fonts.gstatic.com/s/sourcesanspro/v13/6xKydSBYKcSV-LCoeQqfX1RYOo3ig4vwlxdu3cOWxw.woff2 rel=preload type=font/woff2 as=font crossorigin=anonymous> <link href=/Material-Design-Icons.woff rel=preload type=font/woff2 as=font crossorigin=anonymous> <style>@font-face{font-family:'Source Sans Pro';font-style:normal;font-weight:400;font-display:swap;src:local('Source Sans Pro Regular'),local('SourceSansPro-Regular'),url(https://fonts.gstatic.com/s/sourcesanspro/v13/6xK3dSBYKcSV-LCoeQqfX1RYOo3qOK7lujVj9w.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Source Sans Pro';font-style:normal;font-weight:700;font-display:swap;src:local('Source Sans Pro Bold'),local('SourceSansPro-Bold'),url(https://fonts.gstatic.com/s/sourcesanspro/v13/6xKydSBYKcSV-LCoeQqfX1RYOo3ig4vwlxdu3cOWxw.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:"Material Design Icons";src:url(/Material-Design-Icons.woff) format("woff");font-weight:400;font-style:normal}</style> <link href=icon-76x76.png rel=apple-touch-icon sizes="60x60 72x72 76x76"> <link href=icon-120x120.png rel=apple-touch-icon sizes="114x114 120x120"> <link href=icon-144x144.png rel=apple-touch-icon sizes=144x144> <link href=icon-152x152.png rel=apple-touch-icon sizes=152x152> <link href=icon-180x180.png rel=apple-touch-icon sizes="167x167 180x180"> <link href=icon-32x32.png rel=icon sizes="16x16 32x32" type=image/png> <link href=icon-96x96.png rel=icon sizes=96x96 type=image/png> <link href=icon-192x192.png rel=icon sizes=192x192 type=image/png> <link href=manifest.json rel=manifest> <link href=client/main.83641940.css rel=stylesheet><link href=client/[feature].html.4c5b8ee4.css rel=stylesheet><link href=client/prism.7976db51.css rel=stylesheet> <noscript id=sapper-head-start></noscript><title>What Web Can Do Today: Offline Mode</title> <meta content="What Web Can Do Today: Offline Mode" property=og:title> <meta content="Can I rely on the Web Platform features to build my app? An overview of the device integration HTML5 APIs." property=og:description> <meta content=https://whatwebcando.today/offline.html property=og:url> <meta content=https://whatwebcando.today/images/share-image.png property=og:image> <meta content="What Web Can Do Today: Offline Mode" name=twitter:title> <meta content="Can I rely on the Web Platform features to build my app? An overview of the device integration HTML5 APIs." name=twitter:description> <meta content=https://whatwebcando.today/images/share-image.png name=twitter:image><noscript id=sapper-head-end></noscript> <meta content=yes name=apple-mobile-web-app-capable> <meta content=yes name=mobile-web-app-capable> <meta content="What Web Can Do Today" name=application-name> <meta content="What Web Can Do" name=apple-mobile-web-app-title> <meta content=https://whatwebcando.today/icon-144x144.png name=msapplication-TileImage> <meta content=#ffffff name=theme-color> <meta content=#ffffff name=msapplication-navbutton-color> <meta content=black-translucent name=apple-mobile-web-app-status-bar-style> <meta content=/ name=msapplication-starturl> <meta content=website property=og:type> <meta content=WhatWebCanDo property=og:site_name> <meta content=summary name=twitter:card> <meta content=@WhatWebCanDo name=twitter:site> <meta content="AodJP6VzyH9zQqSi558VIXMDL7ElDBm3rY6IiSz2KRZ6ogLxtTCwBItsHBqyX1KURSLf6kNfFG4seIDiRKL77QAAAABSeyJvcmlnaW4iOiJodHRwczovL3doYXR3ZWJjYW5kby50b2RheTo0NDMiLCJmZWF0dXJlIjoiV2ViTkZDIiwiZXhwaXJ5IjoxNTgyNzI1NzAyfQ==" http-equiv=origin-trial> <meta content=AqnI8DMpa55imS/qK7qE73uRgm1X+UdZ7rbInxtM7F8zTgfm9e+E0tcY0KmI+Mm7FfAosKU5cqMN+8sL7COcMAsAAABUeyJvcmlnaW4iOiJodHRwczovL3doYXR3ZWJjYW5kby50b2RheTo0NDMiLCJmZWF0dXJlIjoiV2FrZUxvY2siLCJleHBpcnkiOjE1ODI3ODUzMjJ9 http-equiv=origin-trial> <meta content=AokzD/SJeJfcKJARUtujICN14urOGYKGGlHJWE2Aixopd5YQcdCwchsqcwS84XJSX6PJTkMuabIcE1ZRZxuMzgEAAABXeyJvcmlnaW4iOiJodHRwczovL3doYXR3ZWJjYW5kby50b2RheTo0NDMiLCJmZWF0dXJlIjoiU21zUmVjZWl2ZXIiLCJleHBpcnkiOjE1ODM3NzQwODl9 http-equiv=origin-trial> </head> <body> <div id=sapper> <header class="svelte-1fz80hk text-center"> <nav> <ul class=svelte-1fz80hk> <li class=svelte-1fz80hk><a href=. class=svelte-1fz80hk>Features</a></li> <li class=svelte-1fz80hk><a href=/articles/ class=svelte-1fz80hk>Articles</a></li> <li class=svelte-1fz80hk><a href=https://adambar.pl/#services target=_blank rel=noopener class=svelte-1fz80hk>Services</a></li> <li class=svelte-1fz80hk><a href=https://adambar.pl/#workshops target=_blank rel=noopener class=svelte-1fz80hk>Trainings</a></li> </ul> </nav> <div class="svelte-1fz80hk title-container"> <h1 class=svelte-1fz80hk>What Web Can Do Today?</h1> <p class=svelte-1fz80hk>Can I rely on the Web Platform features to build my app?</p> <p class=svelte-1fz80hk>An overview of the device integration HTML5 APIs</p> </div> </header> <main class="svelte-bsi55g page"> <nav aria-label=breadcrumbs class=breadcrumb> <ul> <li><a href=/ >Features</a></li> <li class=is-active><a href=/offline.html aria-current=page>Offline Mode</a></li> </ul> </nav> <article> <h2>Offline Mode</h2> <section> <p>Web applications can provide the offline experience using two techniques. The older implementation, <b>Application Cache</b>, is <a href="http://caniuse.com/#feat=offline-apps" target=_blank rel=noopener>widely implemented</a> in the browsers, but is now in the process of deprecation due to <a href=http://alistapart.com/article/application-cache-is-a-douchebag target=_blank rel=noopener>various conceptual and design flaws</a>. It is not covered here.<p>The modern alternative is called <b>Service Worker</b>. Web applications running on HTTPS can request the browser to install the separate code unit called Service Worker. This unit is then run in separation from the owning Web application, communicating with it via events. Besides being the enabler for multiple complex APIs like <a href=/push-notifications.html>Push Notifications</a>, <a href=/background-sync.html>Background Sync</a> or <a href=/geofencing.html>Geofencing</a>, it can work as a fully featured network proxy. It can intercept all the HTTP requests, alter its content or behaviors, or - most notably - manage offline caching.<p><small>Code examples adapted from <a href=http://www.html5rocks.com/en/tutorials/service-worker/introduction/ target=_blank rel=noopener>HTML5 Rocks article</a>.</small></p> </section> <section> <h3>API glimpse</h3> <div class="api-glimpse language-javascript"><p><b>Within the owning Web application - Installation</b></p> <dl> <dt><code>navigator.serviceWorker.register(path)</code></dt> <dd>Installs the Service Worker code available under <code>path</code>. Returns a <code>Promise</code>.</dd> <dt><code>navigator.serviceWorker.ready</code></dt> <dd>Returns a <code>Promise</code> resolved with <code>serviceWorkerRegistration</code> when the Worker is initialized.</dd> <dt><code>serviceWorkerRegistration.update()</code></dt> <dd>Checks the server for an updated version of the Service Worker without consulting caches.</dd> <dt><code>serviceWorkerRegistration.unregister()</code></dt> <dd>Uninstalls the Service Worker.</dd> </dl> <p><b>Within the Service Worker instance - Cache prefetch</b></p> <pre><code>self.addEventListener('install', function (event) {
  event.waitUntil(
    caches.open('my-cache-v1')
      .then(function (cache) {
        return cache.addAll(['/', '/styles/main.css', '/scripts/main.js']);
      })
  );
});</code></pre> <dl> <dt><code>self.addEventListener('install', listener)</code></dt> <dd>An event fired within the Service Worker when it is being installed. Useful to prefetch the resources needed in the offline mode and to prefill the cache.</dd> <dt><code>event.waitUntil(promise)</code></dt> <dd>An install event method that expects a <code>Promise</code> which signals the end of the worker's installation phase when resolved.</dd> <dt><code>caches.open(cacheName)</code></dt> <dd>Returns a <code>Promise</code> resolved with the named cache accessor object that is able to keep the resources needed for the offline mode.</dd> <dt><code>cache.addAll(urls)</code></dt> <dd>Adds all the resources specified with the URLs to the named cache for the future, possibly offline, use.</dd> </dl> <p><b>Within the Service Worker instance - Requests cache</b></p> <pre><code>function isSuccessful(response) {
  return response &&
    response.status === 200 &&
    response.type === 'basic';
}

self.addEventListener('fetch', function (event) {
  event.respondWith(
    caches.match(event.request)
      .then(function (response) {
        if (response) {
          return response; // Cache hit
        }

        return fetch(event.request.clone())
          .then(function (response) {
            if (!isSuccessful(response)) {
              return response;
            }

            caches.open(CACHE_NAME)
              .then(function (cache) {
                cache.put(event.request, response.clone());
              });

            return response;
          }
        );
      })
    );
});</code></pre> <dl> <dt><code>self.addEventListener('fetch', listener)</code></dt> <dd>An event fired within the Service Worker whenever any of its related browser tabs have issued a HTTP request. Useful to serve already cached response or intercept and cache the incoming response.</dd> <dt><code>event.respondWith(promise)</code></dt> <dd>A fetch event method that expects a <code>Promise</code> which resolves with the request data to be returned to the requesting browser tab.</dd> <dt><code>cache.put(request, response)</code></dt> <dd>Adds the specified response for the request to the named cache for the future, possibly offline, use.</dd> <dt><code>caches.match(event.request)</code></dt> <dd>Returns a <code>Promise</code> resolved when the <code>fetch</code> event represents a request to the resource already cached within the Service Worker's cache.</dd> </dl> <p>See also <b><a href=/service-worker.js target=_blank>this website's own Service Worker implementation</a></b>.</div> </section> <section aria-hidden=true> <h3>Browser support</h3> <div class=caniuse-report> <div class="svelte-bsi55g row"> <div class="svelte-bsi55g col-sm-6 ct-chart browsers-chart"></div> <div class="svelte-bsi55g col-sm-6 ct-chart overall-chart"></div> </div> <div class="svelte-bsi55g row"> <div class="svelte-bsi55g legend"> <ul class=svelte-bsi55g> <li class=svelte-bsi55g><i class="cl-support cl-support-no"></i> No support</li> <li class=svelte-bsi55g><i class="cl-support cl-support-partial"></i> Partial support, <a href="http://caniuse.com/#feat=serviceworkers" target=_blank rel=noopener>see details</a></li> <li class=svelte-bsi55g><i class="cl-support cl-support-full"></i> Full support</li> </ul> </div> <div class="svelte-bsi55g text-right"> <a href="http://caniuse.com/#feat=serviceworkers" target=_blank rel=noopener>Data from caniuse.com</a>, <small>CC-BY 4.0 license</small> </div> </div> </div> </section> <section> <h3>Resources</h3> <ul class=resources> <li><a href=http://www.w3.org/TR/service-workers/ target=_blank rel=noopener>Service Workers Specification Draft</a><li><a href=http://www.html5rocks.com/en/tutorials/service-worker/introduction/ target=_blank rel=noopener>HTML5 Rocks: Introduction to Service Worker</a><li><a href=https://jakearchibald.com/2014/offline-cookbook/ target=_blank rel=noopener>The offline cookbook</a><li><a href=https://developer.mozilla.org/en-US/docs/Web/API/ServiceWorker_API target=_blank rel=noopener>ServiceWorker API - MDN docs</a><li><a href=https://googlechrome.github.io/samples/service-worker/prefetch/index.html target=_blank rel=noopener>Service Worker Sample: Pre-fetching Resources During Registration</a><li><a href=https://medium.com/@slsoftworks/beyond-offline-bf5c013ec8e7 target=_blank rel=noopener>Beyond Offline: Using a custom service worker to expand on your browserâ€™s capabilities</a><li><a href=https://ponyfoo.com/articles/serviceworker-revolution target=_blank rel=noopener>ServiceWorker: Revolution of the Web Platform</a><li><a href=https://jakearchibald.github.io/isserviceworkerready/resources.html target=_blank rel=noopener>Is ServiceWorker Ready? - Jake Archibald</a><li><a href=https://css-tricks.com/serviceworker-for-offline/ target=_blank rel=noopener>Making a Simple Site Work Offline with ServiceWorker</a></li> </ul> </section> </article> </main> <div class="svelte-p0dnmz loader" aria-hidden=true> <div class="svelte-p0dnmz lds-ellipsis"> <div class=svelte-p0dnmz></div><div class=svelte-p0dnmz></div><div class=svelte-p0dnmz></div><div class=svelte-p0dnmz></div> </div> </div> <div class="svelte-btjd4g container" aria-label="Website footer"> <div class="text-center contact"> <h2 class=svelte-btjd4g>Get in touch</h2> <ul class=svelte-btjd4g> <li class=svelte-btjd4g><a href=mailto:hi@adambar.pl class="svelte-btjd4g icon mail-icon">Mail</a></li> <li class=svelte-btjd4g><a href=https://twitter.com/WhatWebCanDo target=_blank rel="noreferrer noopener" class="svelte-btjd4g icon twitter-icon">Twitter</a></li> <li class=svelte-btjd4g><a href=https://linkedin.com/in/adamrbar target=_blank rel="noreferrer noopener" class="svelte-btjd4g icon linkedin-icon">LinkedIn</a></li> <li class=svelte-btjd4g><a href=https://github.com/NOtherDev/whatwebcando target=_blank rel="noreferrer noopener" class="svelte-btjd4g icon github-icon">GitHub</a></li> </ul> </div> <footer class=svelte-btjd4g role=contentinfo> <p class=text-left><a href=/privacy.html class=svelte-btjd4g>Privacy Policy</a></p> <p class=text-right> Created by <a href=https://adambar.pl target=_blank rel=noopener class=svelte-btjd4g>Adam Bar</a><br> Licenced under <a href=https://creativecommons.org/licenses/by-sa/4.0/ target=_blank rel="noreferrer noopener" class=svelte-btjd4g>CC-BY-SA 4.0</a> </p> </footer> </div></div> <script>__SAPPER__={baseUrl:"",preloaded:[void 0,]};if('serviceWorker' in navigator) window.addEventListener('load',function(){navigator.serviceWorker.register('/service-worker.js');});(function(){try{eval("async function x(){}");var main="/client/client.893a8b86.js"}catch(e){main="/client/legacy/client.44eb41cb.js"};var s=document.createElement("script");try{new Function("if(0)import('')")();s.src=main;s.type="module";s.crossOrigin="use-credentials";}catch(e){s.src="/client/shimport@1.0.1.js";s.setAttribute("data-main",main);}document.head.appendChild(s);}());</script> 